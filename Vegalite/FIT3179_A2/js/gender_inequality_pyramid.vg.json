{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "description": "A population pyramid for the US in 2000.",
    "data": { "url": "https://raw.githubusercontent.com/ocha0014/FIT3179/main/Vegalite/FIT3179_A2/data/gender_inequality_final.csv"},
    "transform": [
      {"calculate": "datum.Gender == 2 ? 'Female' : 'Male'", "as": "gender"},
      {"filter":"datum.EmployabilityRatio > 0"}
    ],
    "spacing": 30,
    "vconcat":[
      {
        "title":"Employability Rate by Gender, Before 2000",
        "hconcat": [
          {"transform": [
            {"filter":"datum.Period == 'B' "},
            {"filter": {"field": "gender", "equal": "Female"}
        }],
      "title": "Female",
      "mark": "bar",
      "encoding": {
        "y": {
          "field": "Continent",  "sort": "ascending","axis": null
        },
        "x": {
          "aggregate": "sum", "field": "EmployabilityRatio",
          "title": "population",
          "axis": {"format": "s"},
          "sort": "descending"
        },
        "color": {
          "field": "gender",
          "scale": {"range": ["#675193", "#ca8861"]},
          "legend": null
        },
        "tooltip":[
          {"field":"EmployabilityRatio", "type": "quantitative", "title":"Employability Ratio"}
        ]
      }
    }, 
    {
      "width": 20,
      "view": {"stroke": null},
      "mark": {
        "type": "text",
        "align": "center"
      },
      "encoding": {
        "y": {"field": "Continent", "type": "ordinal", "axis": null},
        "text": {"field": "Continent", "type": "ordinal"}
      }
    }, 
    {
      "transform": [
        {"filter":"datum.Period == 'B' "},
        {"filter": {"field": "gender", "equal": "Male"}
      }],
      "title": "Male",
      "mark": "bar",
      "encoding": {
        "y": {
          "field": "Continent", "title": null,
           "sort": "ascending","axis": null
        },
        "x": {
          "aggregate": "sum", "field": "EmployabilityRatio",
          "title": "population",
          "axis": {"format": "s"}
        },
        "color": {
          "field": "gender",
          "legend": null
        },
        "tooltip":[
          {"field":"EmployabilityRatio", "type": "quantitative", "title":"Employability Ratio"}
        ]
      }
    }]},
      {
         "title":"Employability Rate by Gender, After 2000",
         "hconcat": [{
      "transform": [
        {"filter":"datum.Period == 'A' "},
        {"filter": {"field": "gender", "equal": "Female"}
      }],
      "title": "Female",
      "mark": "bar",
      "encoding": {
        "y": {
          "field": "Continent", "sort": "ascending","axis":null
        },
        "x": {
          "aggregate": "sum", "field": "EmployabilityRatio",
          "title": "population",
          "axis": {"format": "s"},
          "sort": "descending"},
        "color": {
          "field": "gender",
          "scale": {"range": ["#675193", "#ca8861"]},
          "legend": null
        },
        "tooltip":[
          {"field":"EmployabilityRatio", "type": "quantitative", "title":"Employability Ratio"}
        ]
      }
    }, 
    {
      "width": 20,
      "view": {"stroke": null},
      "mark": {
        "type": "text",
        "align": "center"
      },
      "encoding": {
        "y": {"field": "Continent", "type": "ordinal", "axis": null},
        "text": {"field": "Continent", "type": "ordinal"}
      }
    }, 
    {
      "transform": [
        {"filter":"datum.Period == 'A' "},
        {"filter": {"field": "gender", "equal": "Male"}
      }],
      "title": "Male",
      "mark": "bar",
      "encoding": {
        "y": {
          "field": "Continent", "title": null,
          "sort": "ascending","axis":null
        },
        "x": {
          "aggregate": "sum", "field": "EmployabilityRatio",
          "title": "population",
          "axis": {"format": "s"}
        },
        "color": {
          "field": "gender",
          "legend": null
        },
        "tooltip":[
          {"field":"EmployabilityRatio", "type": "quantitative", "title":"Employability Ratio"}
        ]
      }
    }]}],
  
    "config": {
      "view": {"stroke": null},
      "axis": {"grid": false}
    }
  }
  