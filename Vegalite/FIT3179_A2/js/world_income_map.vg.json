{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "width":800,
    "height":450,
    "title": "World Income Distribution",
    "projection": {"type": "equalEarth"},
    "data":{
      "url":"https://raw.githubusercontent.com/ocha0014/FIT3179/main/Vegalite/HW9/js/ne_110m.json",
      "format":{"type": "topojson","feature":"ne_110m_admin_0_countries"
      }     
    },
    "transform": [
      {
        "lookup": "properties.NAME",
        "from":{
          "data":{"url": "https://raw.githubusercontent.com/ocha0014/FIT3179/main/Vegalite/FIT3179_A2/data/d1_country_income.csv"},
          "key": "Country",
          "fields": ["IncomeGroup"]
        }
      },
      {"calculate": "datum.IncomeGroup ","as":"Income Group"}
    ],
    "mark":{"type": "geoshape"},
    "encoding": {
      "color":{
        "field":"Income Group",
        "type": "ordinal",
        "scale":{
            "type": "ordinal",
            "domain":["null","Low income","Lower middle income","Upper middle income","High income"],
            "range":["#D3D3D3","#7b3294","#c2a5cf","#a6dba0","#008837"]}
      },
      "tooltip":[
        {"field":"properties.NAME","type": "nominal","title":"Country"},
        {"field":"IncomeGroup","type":"ordinal"}
      ]
    }
  }
  